{% extends "layout.html" %}
{% block head %}
	<!-- SEQVIEW -->
	<script src="/static/js/sequence-viewer.bundle.js" type="text/javascript"></script>
	<script src="/static/js/seqviewer.js"></script>
	<!-- CLIPBOARD -->

	<script src="/static/js/clipboard.min.js" type="text/javascript"></script>
	<script src="/static/js/clipboard_tooltip.js"></script>

	<title>Recode2S - DNA recoding for type II-S cloning</title>
	<meta name="description" content="DNA recoding to type II-S parts for CIDAR/MoClo cloning">
	<meta name="keywords" content="Synthetic Biology, Type II-S, BsaI, SapI, CIDAR, MoClo, Common Sintax">
	<meta name="author" content="Bernardo Pollak">

{% endblock %}
{% block content %}

		<h1 class="title"><a href="/">Recode2S</a> - DNA recoding to type II-S parts</h1>

	<div class="description">
		
		<h3 id="message">{{BsaI|length}} BsaI and {{SapI|length}} SapI restriction site(s) were found.</h3>
	
			<div id="seqView" class="seqView"></div>
			
			<div id="clipboard">
				<button id="clipboard_btn" class="button right" data-clipboard-text="">Copy</button>
				<button id="download_gb_btn" class="button right" onclick="export_GB('{{name}}','{{seqtype}}')">Genbank file</button>
				<button id="recode_btn" class="button right" onclick="recode('{{name}}','{{seq}}','{{newseq}}', '{{seqtype}}')">Recode</button>
			</div>
				
				{% if seqtype == "cds" %}
					<select class="selector right" id="selector" class="right" name="Fusion" type="text" onchange="change_overhangs(value);">
						<option value="N">N-terminal fusion</option>
						<option value="None" selected>No fusion</option>
						<option value="C">C-terminal fusion</option>
					</select>
				{% else %}
				{% endif %}
	</div>
		<script>
			
		$(function(){
			var clipboard = new Clipboard('#clipboard_btn');
			$("#clipboard_btn").mouseleave(function(){
				$(this).removeClass('tooltipped');
				$(this).attr('aria-label', '');
				$(this).attr('text', '');
			});

			clipboard.on('error', function(e) {
				showTooltip(e.trigger, fallbackMessage(e.action));
			});
			
			seq = "{{seq}}";
			recoder(seq, "#seqView", "{{name}}"+" - Original");
			legende("BsaI", "blue");
			legende("SapI", "green");
			sites( {{BsaI}}, 6, "blue");
			sites( {{SapI}}, 7, "green");
			highlight_sites();
			add_legend();
		});
			
	</script>

{% endblock %}

